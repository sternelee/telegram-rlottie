function RLottieItem(e,t,r,i,n){this.stringOnWasmHeap=null,this.handle=null,this.frameCount=0,this.reqId=e,this.width=r,this.height=i,this.fps=Math.max(1,Math.min(60,n||60)),this.dead=!1,this.init(t,r,i),reply("loaded",this.reqId,this.frameCount,this.fps)}function defaultReply(e){}function isSafari(e){if(null==_isSafari){var t=e.navigator?e.navigator.userAgent:null;_isSafari=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return _isSafari}function reply(){if(arguments.length<1)throw new TypeError("reply - not enough arguments");var e=Array.prototype.slice.call(arguments,1);if(isSafari(self))postMessage({queryMethodListener:arguments[0],queryMethodArguments:e});else{for(var t=[],r=0;r<e.length;r++)e[r]instanceof ArrayBuffer&&t.push(e[r]),e[r].buffer&&e[r].buffer instanceof ArrayBuffer&&t.push(e[r].buffer);postMessage({queryMethodListener:arguments[0],queryMethodArguments:e},t)}}function getUrlContent(e,t){try{var r=new XMLHttpRequest;r.open("GET",e,!0),"responseType"in r&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(e){4===r.readyState&&(200===r.status||0===r.status?t(null,r.response||r.responseText):t(new Error("Ajax error: "+this.status+" "+this.statusText)))},r.send()}catch(e){t(new Error(e))}}importScripts("rlottie-wasm.min.js"),importScripts("pako-inflate.min.js"),RLottieItem.prototype.init=function(e){try{this.handle=RLottieWorker.Api.init(),this.stringOnWasmHeap=allocate(intArrayFromString(e),"i8",0),this.frameCount=RLottieWorker.Api.loadFromData(this.handle,this.stringOnWasmHeap),RLottieWorker.Api.resize(this.handle,this.width,this.height)}catch(e){console.error("init RLottieItem error:",e)}},RLottieItem.prototype.render=function(e,t){if(!this.dead&&!(this.frameCount<e||e<0))try{RLottieWorker.Api.render(this.handle,e);var r=RLottieWorker.Api.buffer(this.handle),i=Module.HEAPU8.subarray(r,r+this.width*this.height*4);t?t.set(i):t=new Uint8ClampedArray(i),reply("frame",this.reqId,e,t)}catch(e){console.error("Render error:",e),this.dead=!0}},RLottieItem.prototype.destroy=function(){this.dead=!0,RLottieWorker.Api.destroy(this.handle)};var RLottieWorker=function(){function e(){t.Api={init:Module.cwrap("lottie_init","",[]),destroy:Module.cwrap("lottie_destroy","",["number"]),resize:Module.cwrap("lottie_resize","",["number","number","number"]),buffer:Module.cwrap("lottie_buffer","number",["number"]),frameCount:Module.cwrap("lottie_frame_count","number",["number"]),render:Module.cwrap("lottie_render","",["number","number"]),loadFromData:Module.cwrap("lottie_load_from_data","number",["number","number"])}}var t={Api:{},init:function(){e(),reply("ready")}};return t}();Module.onRuntimeInitialized=function(){RLottieWorker.init()};var items={},queryableFunctions={loadFromData:function(e,t,r,i){getUrlContent(t,function(n,a){if(n)return console.warn("Can't fetch file "+t,n);try{var o=pako.inflate(a,{to:"string"}),s=JSON.parse(o);items[e]=new RLottieItem(e,o,r,i,s.fr)}catch(e){return console.warn("Invalid file "+t)}})},destroy:function(e){items[e].destroy(),delete items[e]},renderFrame:function(e,t,r){items[e].render(t,r)}},_isSafari=null;onmessage=function(e){e.data instanceof Object&&e.data.hasOwnProperty("queryMethod")&&e.data.hasOwnProperty("queryMethodArguments")?queryableFunctions[e.data.queryMethod].apply(self,e.data.queryMethodArguments):defaultReply(e.data)};